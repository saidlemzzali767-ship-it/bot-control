<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; text-align: center; }
    button { padding: 10px 20px; margin: 5px; font-size: 16px; cursor: pointer; }
    input { padding: 5px; margin-top: 10px; width: 200px; }
  </style>
</head>
<body>
  <h2>Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø¨ÙˆØª ğŸš€</h2>

  <button onclick="updateConfig('ON')">ØªØ´ØºÙŠÙ„ âœ…</button>
  <button onclick="updateConfig('OFF')">Ø¥ÙŠÙ‚Ø§Ù â›”</button>

  <div>
    <h3>Ù…Ø¯Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</h3>
    <input type="datetime-local" id="expiryInput" />
    <button onclick="setExpiry()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¯Ø©</button>
  </div>

  <p id="status"></p>

  <script>
    const repoOwner = "USERNAME"; // ğŸ‘ˆ Ø¨Ø¯Ù‘Ù„Ù‡Ø§ Ø¨ username Ø¯ÙŠØ§Ù„Ùƒ
    const repoName = "bot-control"; // ğŸ‘ˆ Ø¨Ø¯Ù‘Ù„Ù‡Ø§ Ø¨Ø§Ø³Ù… Ø§Ù„Ø±ÙŠØ¨Ùˆ Ø¯ÙŠØ§Ù„Ùƒ
    const filePath = "config.json";
    const githubToken = "YOUR_PERSONAL_ACCESS_TOKEN"; // âš ï¸ Ø¨Ø¯Ù‘Ù„Ù‡Ø§ Ø¨Ø§Ù„ØªÙˆÙƒÙ† Ø¯ÙŠØ§Ù„Ùƒ

    async function updateConfig(statusValue) {
      const expiry = new Date().toISOString(); // Ù…Ø¨Ø¯Ø¦ÙŠØ§Ù‹ Ù†Ø®Ù„ÙŠÙ‡ Ù‡Ùˆ Ø§Ù„ÙŠÙˆÙ…
      const config = {
        status: statusValue,
        expiry: expiry,
        token: "MY_SECRET_TOKEN_123"
      };

      await saveToGitHub(config);
      document.getElementById("status").innerText = "ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« âœ”ï¸";
    }

    async function setExpiry() {
      const expiryValue = document.getElementById("expiryInput").value;
      const config = {
        status: "ON",
        expiry: new Date(expiryValue).toISOString(),
        token: "MY_SECRET_TOKEN_123"
      };

      await saveToGitHub(config);
      document.getElementById("status").innerText = "ØªÙ… ØªØ­Ø¯ÙŠØ« Ù…Ø¯Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© âœ”ï¸";
    }

    async function saveToGitHub(config) {
      const url = https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filePath};

      // Ù†Ø¬ÙŠØ¨ Ø¢Ø®Ø± Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ù…Ù„Ù
      const res = await fetch(url, { headers: { Authorization: token ${githubToken} } });
      const file = await res.json();

      // Ù†Ø­ÙˆÙ„ config Ù„ base64
      const content = btoa(JSON.stringify(config, null, 2));

      await fetch(url, {
        method: "PUT",
        headers: {
          Authorization: token ${githubToken},
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          message: "Update config.json",
          content: content,
          sha: file.sha
        })
      });
    }
  </script>
</body>
</html>
